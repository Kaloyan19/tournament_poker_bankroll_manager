{% extends 'tournaments/base.html' %}

{% block title %}All Tournaments{% endblock %}
{% block page_title %}All Tournaments{% endblock %}

{% block page_subtitle %}
<div class="d-flex justify-content-between align-items-center">
    <p class="text-muted mb-0">View and manage all your tournaments</p>
    <div class="btn-group">
        <a href="?period=week" class="btn btn-sm btn-outline-secondary {% if current_period == 'week' %}active{% endif %}">Week</a>
        <a href="?period=month" class="btn btn-sm btn-outline-secondary {% if current_period == 'month' %}active{% endif %}">Month</a>
        <a href="?period=year" class="btn btn-sm btn-outline-secondary {% if current_period == 'year' %}active{% endif %}">Year</a>
        <a href="?period=all" class="btn btn-sm btn-outline-secondary {% if current_period == 'all' %}active{% endif %}">All Time</a>
    </div>
</div>
{% endblock %}

{% block content %}
{% if tournaments %}
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <div>
            <h5 class="mb-0">Tournaments ({{ total_count }})</h5>
            <small class="text-muted">Total Profit:
                <span class="{% if total_profit >= 0 %}profit-positive{% else %}profit-negative{% endif %}">
                    ${{ total_profit }}
                </span>
            </small>
        </div>
        <a href="{% url 'tournaments:add_tournament' %}" class="btn btn-primary btn-sm">
            <i class="bi bi-plus-circle me-2"></i>Add New
        </a>
    </div>
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Date</th>
                        <th>Buy-in</th>
                        <th>Cashed</th>
                        <th>Place</th>
                        <th>Net</th>
                        <th>ITM</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for tournament in tournaments %}
                    <tr>
                        <td>{{ tournament.date }}</td>
                        <td>${{ tournament.buy_in }}</td>
                        <td>${{ tournament.cashed_for }}</td>
                        <td>{{ tournament.place_finished }}</td>
                        <td class="{% if tournament.net_amount >= 0 %}profit-positive{% else %}profit-negative{% endif %}">
                            {{ tournament.display_net }}
                        </td>
                        <td>
                            {% if tournament.is_itm %}
                            <span class="badge bg-success">Yes</span>
                            {% else %}
                            <span class="badge bg-secondary">No</span>
                            {% endif %}
                        </td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <a href="{% url 'tournaments:edit_tournament' tournament.id %}"
                                   class="btn btn-outline-primary">
                                    <i class="bi bi-pencil"></i>
                                </a>
                                <a href="{% url 'tournaments:delete_tournament' tournament.id %}"
                                   class="btn btn-outline-danger">
                                    <i class="bi bi-trash"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% else %}
<div class="text-center py-5">
    <i class="bi bi-trophy display-1 text-muted"></i>
    <h5 class="mt-3">No tournaments found</h5>
    <p class="text-muted">Add your first tournament to start tracking!</p>
    <a href="{% url 'tournaments:add_tournament' %}" class="btn btn-primary">
        <i class="bi bi-plus-circle me-2"></i>Add Tournament
    </a>
</div>
{% endif %}
{% endblock %}